<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CityHospital</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">

  <!-- Font Awesome for Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />

  <!-- Select2 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />

  <!-- Intl Tel Input CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/css/intlTelInput.css" crossorigin="anonymous" referrerpolicy="no-referrer" />

  <!-- FullCalendar CSS -->
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.5/main.min.css" rel="stylesheet">

  <!-- Custom Styles -->
  <link href="assets/css/styles.css" rel="stylesheet">
</head>
<body>
  <!-- Main Content -->
  <div class="main-content" id="mainContent">
    <!-- Top Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-top">
      <div class="container-fluid">
        <!-- Left Section: Brand and Navigation -->
        <div class="d-flex align-items-center">
          <a class="navbar-brand" href="#">
            <i class="fas fa-hospital fa-lg fa-icon"></i>
            City Hospital
          </a>
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item"><a class="nav-link" href="#" data-action="all-bills"><i class="fas fa-file-invoice-dollar fa-icon"></i>All Bills</a></li>
            <li class="nav-item"><a class="nav-link" href="#" data-action="add-services"><i class="fas fa-plus-circle fa-icon"></i>Add Services</a></li>
            <li class="nav-item"><a class="nav-link" href="#" data-action="patient-q"><i class="fas fa-users fa-icon"></i>Patient Q</a></li>
            <li class="nav-item"><a class="nav-link" href="#" data-action="tele-consults"><i class="fas fa-video fa-icon"></i>Tele Consults</a></li>
          </ul>
        </div>
        <!-- Center Section: Dashboard Type and Username -->
        <div class="d-flex align-items-center justify-content-center mx-auto">
          <span class="navbar-text fw-bold text-primary me-3" data-action="dashboard-type">
            <i class="fas fa-tachometer-alt fa-icon me-1"></i>
            <span id="dashboardType">Loading Dashboard...</span>
          </span>
          <span class="navbar-text fw-bold text-primary" data-action="username-display">
            <i class="fas fa-user fa-icon me-1"></i>
            <span id="usernameDisplay">Loading...</span>
          </span>
        </div>
        <!-- Right Section: Actions and User Dropdowns -->
        <div class="d-flex align-items-center">
          <button class="btn btn-primary me-2" data-action="new"><i class="fas fa-plus fa-icon"></i>New</button>
          <form class="d-flex me-2">
            <input class="form-control patient-search" type="search" placeholder="Search Patient" aria-label="Search">
          </form>
          <a class="nav-link me-2" href="#" data-action="support"><i class="fas fa-headset fa-icon"></i>Support</a>
          <div class="dropdown me-2">
            <a class="nav-link dropdown-toggle" href="#" id="dashboardDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              <i class="fas fa-th fa-icon"></i>
            </a>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dashboardDropdown">
              <li><a class="dropdown-item" href="#">Admin Dashboard</a></li>
              <li><a class="dropdown-item" href="#">Doctor Dashboard</a></li>
              <li><a class="dropdown-item" href="#">Reception Dashboard</a></li>
            </ul>
          </div>
          <div class="dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              <i class="fas fa-user fa-icon"></i>
            </a>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
              <li><a class="dropdown-item" href="#">Username</a></li>
              <li><a class="dropdown-item" href="#">Profile</a></li>
              <li><a class="dropdown-item" href="#">Settings</a></li>
              <li><a class="dropdown-item" href="#">Logout</a></li>
            </ul>
          </div>
        </div>
      </div>
    </nav>

    <!-- Secondary Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-secondary">
      <div class="container-fluid">
        <div class="d-flex align-items-center me-auto">
          <a class="nav-link me-2" href="#"><i class="fas fa-sync-alt text-danger"></i></a>
          <button class="btn btn-outline-primary btn-circle me-2" id="calendarTrigger"><i class="fas fa-calendar-alt"></i></button>
          <form class="d-flex me-2"><input class="form-control" type="text" placeholder="Filter Name" aria-label="Filter"></form>
          <button class="btn btn-outline-primary btn-circle me-2"><i class="fas fa-star"></i></button>
          <button class="btn btn-outline-primary btn-circle me-2">M</button>
          <button class="btn btn-outline-primary btn-circle me-2"><i class="fas fa-user"></i></button>
          <button class="btn btn-outline-primary btn-circle me-2"><i class="fas fa-filter"></i></button>
          <button class="btn btn-outline-primary btn-circle me-2"><i class="fas fa-plus"></i></button>
          <button class="btn btn-outline-primary btn-circle me-2"><i class="fas fa-info-circle"></i></button>
        </div>
        <ul class="navbar-nav mx-auto mb-2 mb-lg-0">
          <li class="nav-item"><a class="nav-link active" href="#" data-section="all">All</a></li>
          <li class="nav-item"><a class="nav-link" href="#" data-section="booked">Booked</a></li>
          <li class="nav-item"><a class="nav-link" href="#" data-section="arrived">Arrived</a></li>
          <li class="nav-item"><a class="nav-link" href="#" data-section="on-going">On-Going</a></li>
          <li class="nav-item"><a class="nav-link" href="#" data-section="reviewed">Reviewed</a></li>
          <li class="nav-item"><a class="nav-link" href="#" data-section="scheduled">Scheduled</a></li>
        </ul>
        <div class="d-flex align-items-center">
          <input type="text" class="form-control me-2" id="dateFilter" placeholder="YYYY-MM-DD">
          <button class="btn btn-outline-primary btn-sm me-2">Set</button>
          <button class="btn btn-outline-primary btn-sm">Today</button>
        </div>
      </div>
    </nav>

    <!-- Appointments Section -->
    <div class="container-fluid mt-3">
      <div id="appointmentsSection" class="section active">
        <!-- Filter and Toggle Container -->
        <div class="d-flex justify-content-between align-items-center mb-3">
          <!-- Doctor Filter -->
          <div class="doctor-filter-container">
            <label for="doctorFilter" class="form-label me-2">Filter by Doctor:</label>
            <select class="form-select" id="doctorFilter" aria-label="Filter appointments by doctor">
              <option value="all">All Doctors</option>
              <!-- Populated dynamically -->
            </select>
          </div>
          <!-- View Toggle -->
          <div class="btn-group" role="group" aria-label="View toggle">
            <button type="button" class="btn btn-primary active" id="tableViewBtn" data-view="table">Table View</button>
            <button type="button" class="btn btn-primary" id="calendarViewBtn" data-view="calendar">Calendar View</button>
          </div>
        </div>
        <!-- Appointments Views -->
        <div id="appointmentsTableView" class="appointments-view active">
          <div class="table-responsive">
            <table class="table table-striped table-bordered" id="appointmentsTable">
              <thead>
                <tr>
                  <th>Time</th>
                  <th>Patient</th>
                  <th>Doctor</th>
                  <th>Status</th>
                  <th>Notes</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="appointmentsTableBody">
                <!-- Populated by populateAppointmentsTable -->
              </tbody>
            </table>
          </div>
        </div>
        <div id="appointmentsCalendarView" class="appointments-view">
          <div id="appointmentsCalendar">
            <div class="calendar-grid">
              <div class="calendar-header">
                <div>Time</div>
                <!-- Days will be dynamically populated -->
              </div>
              <div class="calendar-body" id="calendarBody">
                <!-- JavaScript will insert time rows and appointments here -->
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- New Action Modal -->
  <div class="modal fade" id="newActionModal" tabindex="-1" aria-labelledby="newActionModalLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
    <div class="modal-dialog modal-dialog-centered modal-dialog-centered-custom">
      <div class="modal-content">
        <!-- Modal Header -->
        <div class="modal-header">
          <div class="patient-details" id="detailsSection">
            <i class="fas fa-user fa-icon"></i>
            <div class="patient-info">
              <div class="d-flex align-items-center">
                <span id="detailsTitle" class="patient-name">No Patient Selected</span>
                <button class="btn btn-primary btn-sm visit-pad-btn" id="visitPadBtn" style="display: none;">Visit Pad</button>
              </div>
              <span id="detailsMeta" class="patient-meta">N/A | N/A | N/A</span>
            </div>
          </div>
          <!-- Right Side: Tabs -->
          <ul class="nav nav-tabs ms-auto" id="newActionTabs" role="tablist">
            <li class="nav-item"><a class="nav-link" id="abhaTab" data-bs-toggle="tab" href="#abha" role="tab" aria-controls="abha" aria-selected="false"><i class="fas fa-id-card"></i> ABHA</a></li>
            <li class="nav-item"><a class="nav-link active" id="addPatientTab" data-bs-toggle="tab" href="#addPatient" role="tab" aria-controls="addPatient" aria-selected="true"><i class="fas fa-calendar-check"></i> Appt</a></li>
            <li class="nav-item"><a class="nav-link" id="addBillsTab" data-bs-toggle="tab" href="#addBills" role="tab" aria-controls="addBills" aria-selected="false"><i class="fas fa-file-invoice-dollar"></i> Add Bills</a></li>
            <li class="nav-item"><a class="nav-link" id="addServiceTab" data-bs-toggle="tab" href="#addService" role="tab" aria-controls="addService" aria-selected="false"><i class="fas fa-concierge-bell"></i> Add Service</a></li>
            <li class="nav-item"><a class="nav-link" id="billsTab" data-bs-toggle="tab" href="#bills" role="tab" aria-controls="bills" aria-selected="false"><i class="fas fa-file-invoice"></i> Bills</a></li>
            <li class="nav-item"><a class="nav-link" id="paymentsTab" data-bs-toggle="tab" href="#payments" role="tab" aria-controls="payments" aria-selected="false"><i class="fas fa-money-bill-wave"></i> Payments</a></li>
            <li class="nav-item"><a class="nav-link" id="visitsTab" data-bs-toggle="tab" href="#visits" role="tab" aria-controls="visits" aria-selected="false"><i class="fas fa-hospital-user"></i> Visits</a></li>
            <li class="nav-item"><a class="nav-link" id="labProfileTab" data-bs-toggle="tab" href="#labProfile" role="tab" aria-controls="labProfile" aria-selected="false"><i class="fas fa-flask"></i> Lab</a></li>
            <li class="nav-item"><a class="nav-link" id="profileTab" data-bs-toggle="tab" href="#profile" role="tab" aria-controls="profile" aria-selected="false"><i class="fas fa-user-circle"></i> Profile</a></li>
          </ul>
          <!-- Close Button -->
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <!-- Modal Body -->
        <div class="modal-body d-flex" id="modalBody">
          <div class="main-content-area w-100" id="mainContentArea">
            <div class="tab-content" id="newActionTabContent">
              <!-- ABHA Tab -->
              <div class="tab-pane fade" id="abha" role="tabpanel" aria-labelledby="abhaTab">
                <p>ABHA content goes here.</p>
              </div>
              <!-- Add Patient Tab -->
              <div class="tab-pane fade show active" id="addPatient" role="tabpanel" aria-labelledby="addPatientTab">
                <form id="addPatientForm">
                  <div class="card card-body p-3">
                    <h6 class="mb-3">Patient Details</h6>
                    <!-- Row 1: First Name + Last Name, Phone Number, Date of Birth -->
                    <div class="row mb-3">
                      <div class="col-md-4">
                        <label for="patientFirstName" class="form-label">Full Name</label>
                        <div class="input-group input-group-sm">
                          <span class="input-group-text"><i class="fas fa-user"></i></span>
                          <input type="text" class="form-control" id="patientFirstName" placeholder="First Name" required>
                          <input type="text" class="form-control" id="patientLastName" placeholder="Last Name" required>
                        </div>
                      </div>
                      <div class="col-md-4">
                        <label for="patientPhone" class="form-label">Phone Number</label>
                        <div class="input-group input-group-sm">
                          <!-- <span class="input-group-text"><i class="fas fa-phone"></i></span> -->
                          <input type="tel" class="form-control" id="patientPhone" required>
                        </div>
                      </div>
                      <div class="col-md-4">
                        <label for="patientDOB" class="form-label">Date of Birth</label>
                        <div class="input-group input-group-sm">
                          <span class="input-group-text"><i class="fas fa-calendar-alt"></i></span>
                          <input type="text" class="form-control" id="patientDOB" placeholder="YYYY-MM-DD" required>
                        </div>
                      </div>
                    </div>
                    <!-- Row 2: Preferred Language, City, Address, Gender -->
                    <div class="row mb-3">
                      <div class="col-md-3">
                        <label for="preferredLanguage" class="form-label">Preferred Language</label>
                        <div class="input-group input-group-sm">
                          <span class="input-group-text"><i class="fas fa-language"></i></span>
                          <select class="form-select" id="preferredLanguage" required>
                            <option value="" disabled selected>Select Language</option>
                            <option value="English">English</option>
                            <option value="Hindi">Hindi</option>
                            <option value="Tamil">Tamil</option>
                            <option value="Telugu">Telugu</option>
                            <option value="Other">Other</option>
                          </select>
                        </div>
                      </div>
                      <div class="col-md-3">
                        <label for="patientCity" class="form-label">City</label>
                        <div class="input-group input-group-sm">
                          <span class="input-group-text"><i class="fas fa-city"></i></span>
                          <input type="text" class="form-control" id="patientCity">
                        </div>
                      </div>
                      <div class="col-md-3">
                        <label for="patientAddress" class="form-label">Address</label>
                        <div class="input-group input-group-sm">
                          <span class="input-group-text"><i class="fas fa-home"></i></span>
                          <input type="text" class="form-control" id="patientAddress">
                        </div>
                      </div>
                      <div class="col-md-3">
                        <label for="patientGender" class="form-label">Gender</label>
                        <div class="input-group input-group-sm">
                          <div class="btn-group w-100" role="group" aria-label="Gender selection">
                            <input type="radio" class="btn-check" name="patientGender" id="patientGenderMale" value="Male" required>
                            <label class="btn btn-outline-primary" for="patientGenderMale">M</label>
                            <input type="radio" class="btn-check" name="patientGender" id="patientGenderFemale" value="Female">
                            <label class="btn btn-outline-primary" for="patientGenderFemale">F</label>
                            <input type="radio" class="btn-check" name="patientGender" id="patientGenderOther" value="Other">
                            <label class="btn btn-outline-primary" for="patientGenderOther">Other</label>
                          </div>
                          <input type="hidden" id="patientGender" name="patientGender">
                        </div>
                      </div>
                    </div>
                    <!-- Row 3: Pincode, Marital Status, Marital Since -->
                    <div class="row mb-3">
                      <div class="col-md-4">
                        <label for="patientPin" class="form-label">Pincode</label>
                        <div class="input-group input-group-sm">
                          <span class="input-group-text"><i class="fas fa-map-pin"></i></span>
                          <input type="text" class="form-control" id="patientPin">
                        </div>
                      </div>
                      <div class="col-md-4">
                        <label for="maritalStatus" class="form-label">Marital Status</label>
                        <div class="input-group input-group-sm">
                          <span class="input-group-text"><i class="fas fa-ring"></i></span>
                          <select class="form-select" id="maritalStatus" required>
                            <option value="" disabled selected>Select Status</option>
                            <option value="Single">Single</option>
                            <option value="Married">Married</option>
                            <option value="Divorced">Divorced</option>
                            <option value="Widowed">Widowed</option>
                          </select>
                        </div>
                      </div>
                      <div class="col-md-4">
                        <label for="maritalSince" class="form-label">Marital Since</label>
                        <div class="input-group input-group-sm">
                          <span class="input-group-text"><i class="fas fa-calendar-alt"></i></span>
                          <input type="text" class="form-control" id="maritalSince" placeholder="YYYY-MM-DD">
                        </div>
                      </div>
                    </div>
                    <!-- Row 4: Blood Group, Email, CIO, Aadhar Number -->
                    <div class="row mb-3">
                      <div class="col-md-3">
                        <label for="bloodGroup" class="form-label">Blood Group</label>
                        <div class="input-group input-group-sm">
                          <span class="input-group-text"><i class="fas fa-tint"></i></span>
                          <select class="form-select" id="bloodGroup">
                            <option value="" disabled selected>Select Blood Group</option>
                            <option value="A+">A+</option>
                            <option value="A-">A-</option>
                            <option value="B+">B+</option>
                            <option value="B-">B-</option>
                            <option value="AB+">AB+</option>
                            <option value="AB-">AB-</option>
                            <option value="O+">O+</option>
                            <option value="O-">O-</option>
                          </select>
                        </div>
                      </div>
                      <div class="col-md-3">
                        <label for="patientEmail" class="form-label">Email</label>
                        <div class="input-group input-group-sm">
                          <span class="input-group-text"><i class="fas fa-envelope"></i></span>
                          <input type="email" class="form-control" id="patientEmail">
                        </div>
                      </div>
                      <div class="col-md-3">
                        <label for="cio" class="form-label">C/O</label>
                        <div class="input-group input-group-sm">
                          <span class="input-group-text"><i class="fas fa-info-circle"></i></span>
                          <input type="text" class="form-control" id="cio">
                        </div>
                      </div>
                      <div class="col-md-3">
                        <label for="aadharNumber" class="form-label">Aadhar Number</label>
                        <div class="input-group input-group-sm">
                          <span class="input-group-text"><i class="fas fa-id-card"></i></span>
                          <input type="text" class="form-control" id="aadharNumber" maxlength="12">
                        </div>
                      </div>
                    </div>
                    <!-- Row 5: Referred By, Specialty, Alternate Mobile, Emergency Contact Number -->
                    <div class="row mb-3">
                      <div class="col-md-3">
                        <label for="doctor" class="form-label">Referred By</label>
                        <div class="input-group input-group-sm">
                          <span class="input-group-text"><i class="fas fa-user-md"></i></span>
                          <select class="form-select" id="doctor"></select>
                            <option value="" disabled selected>Select Doctor</option>
                            <!-- Options populated dynamically via JavaScript -->
                          </select>
                        </div>
                      </div>
                      <div class="col-md-3">
                        <label for="doctorSpecialty" class="form-label">Specialty</label>
                        <div class="input-group input-group-sm">
                          <span class="input-group-text"><i class="fas fa-stethoscope"></i></span>
                          <input type="text" class="form-control" id="doctorSpecialty" readonly>
                        </div>
                      </div>
                      <div class="col-md-3">
                        <label for="mobile2" class="form-label">Alternate Mobile</label>
                        <div class="input-group input-group-sm">
                          <!-- <span class="input-group-text"><i class="fas fa-mobile-alt"></i></span> -->
                          <input type="tel" class="form-control" id="mobile2">
                        </div>
                      </div>
                      <div class="col-md-3">
                        <label for="emergencyContactNumber" class="form-label">Emergency Contact Number</label>
                        <div class="input-group input-group-sm">
                          <span class="input-group-text"><i class="fas fa-phone"></i></span>
                          <input type="tel" class="form-control" id="emergencyContactNumber">
                        </div>
                      </div>
                    </div>
                    <!-- Sticky Footer with Buttons -->
                    <div class="sticky-footer">
                      <button type="submit" class="btn btn-primary btn-sm me-2" id="addAndCreateBill">Add & Create Bill</button>
                      <button type="submit" class="btn btn-primary btn-sm" id="addAndCreateAppointment">Add & Create Appointment</button>
                    </div>
                  </div>
                </form>
              </div>
              <!-- Add Service Tab -->
              <div class="tab-pane fade" id="addService" role="tabpanel" aria-labelledby="addServiceTab">
                <form id="addServiceForm">
                  <h6 class="mb-3">Add New Service</h6>
                  <div class="row mb-3">
                    <div class="col-md-6">
                      <label for="serviceName" class="form-label">Service Name</label>
                      <div class="input-group input-group-sm">
                        <span class="input-group-text"><i class="fas fa-concierge-bell"></i></span>
                        <input type="text" class="form-control" id="serviceName" name="service_name" required>
                      </div>
                    </div>
                    <div class="col-md-6">
                      <label for="servicePrice" class="form-label">Service Price (₹)</label>
                      <div class="input-group input-group-sm">
                        <span class="input-group-text"><i class="fas fa-rupee-sign"></i></span>
                        <input type="number" class="form-control" id="servicePrice" name="service_price" min="0" step="0.01" required>
                      </div>
                    </div>
                  </div>
                  <div class="row mb-3">
                    <div class="col-md-6">
                      <label for="serviceCode" class="form-label">Service Code</label>
                      <div class="input-group input-group-sm">
                        <span class="input-group-text"><i class="fas fa-barcode"></i></span>
                        <input type="text" class="form-control" id="serviceCode" name="service_code" required>
                      </div>
                    </div>
                    <div class="col-md-6">
                      <label for="serviceColorCode" class="form-label">Service Color Code</label>
                      <div class="input-group input-group-sm">
                        <span class="input-group-text"><i class="fas fa-palette"></i></span>
                        <input type="color" class="form-control form-control-color" id="serviceColorCode" name="service_color_code" value="#007bff" required>
                      </div>
                    </div>
                  </div>
                  <div class="row mb-3">
                    <div class="col-md-12">
                      <label for="serviceDoctors" class="form-label">Doctors</label>
                      <div class="input-group input-group-sm">
                        <span class="input-group-text"><i class="fas fa-user-md"></i></span>
                        <select id="serviceDoctors" name="doctors[]" class="form-select" multiple required style="height: 100px;">
                          <!-- Options populated by populateDoctorDropdown -->
                        </select>
                      </div>
                    </div>
                  </div>
                  <div class="sticky-footer">
                    <button type="submit" class="btn btn-primary btn-sm">Add Service</button>
                  </div>
                </form>
                <div class="mt-4">
                  <h6>Added Services</h6>
                  <button id="editServicesBtn" class="btn btn-primary">Edit</button>
                  <table class="table table-sm table-bordered">
                    <thead>
                      <tr>
                        <th>#</th>
                        <th>Service Name</th>
                        <th>Service Code</th>
                        <th>Price (₹)</th>
                        <th>Color Code</th>
                        <th>Owner</th>
                      </tr>
                    </thead>
                    <tbody id="servicesTableBody"></tbody>
                  </table>
                </div>
              </div>
              <!-- Add Bills Tab -->
              <div class="tab-pane fade" id="addBills" role="tabpanel" aria-labelledby="addBillsTab">
                <div class="row g-0">
                  <!-- Left Column (69%) -->
                  <div class="col-md-8" style="border-right: 1px solid #dee2e6;">
                    <form id="addBillsForm">
                      <input type="hidden" id="patientIdForBill" name="patient_id">
                      <div class="row mb-3 align-items-center">
                        <div class="col-md-6">
                          <label for="billDate" class="form-label">Bill Date</label>
                          <div class="input-group input-group-sm">
                            <span class="input-group-text"><i class="fas fa-calendar-alt"></i></span>
                            <input type="text" class="form-control" id="billDate" name="bill_date" placeholder="YYYY-MM-DD" required>
                          </div>
                        </div>
                        <div class="col-md-3 d-flex align-items-end">
                          <button type="button" class="btn btn-outline-primary btn-sm w-100" id="todayBillBtn">Today</button>
                        </div>
                        <div class="col-md-3">
                          <label for="depositAmount" class="form-label">Deposit Amount (₹)</label>
                          <div class="input-group input-group-sm">
                            <span class="input-group-text"><i class="fas fa-rupee-sign"></i></span>
                            <input type="number" class="form-control" id="depositAmount" name="deposit_amount" min="0" step="0.01" value="0">
                          </div>
                        </div>
                      </div>
                      <table class="table table-bordered table-sm">
                        <thead>
                          <tr>
                            <th>#</th>
                            <th>Service Name</th>
                            <th>Code</th>
                            <th>Qty</th>
                            <th>Unit Price (₹)</th>
                            <th>GST%</th>
                            <th>Discount (₹)</th>
                            <th>Total Price (₹)</th>
                          </tr>
                        </thead>
                        <tbody id="billItemsTableBody"></tbody>
                      </table>
                      <button type="button" class="btn btn-outline-primary btn-sm mb-3" id="addBillItem">Add Item</button>
                      <div class="row mb-3">
                        <div class="col-md-6">
                          <label for="totalAmount" class="form-label">Total Amount (₹)</label>
                          <div class="input-group input-group-sm">
                            <span class="input-group-text"><i class="fas fa-rupee-sign"></i></span>
                            <input type="number" class="form-control" id="totalAmount" readonly>
                          </div>
                        </div>
                        <div class="col-md-6">
                          <label for="billNotes" class="form-label">Notes</label>
                          <textarea class="form-control" id="billNotes" rows="Tf2" placeholder="Bill Notes"></textarea>
                        </div>
                      </div>
                      <div class="sticky-footer">
                        <button type="submit" class="btn btn-primary btn-sm">Create Bill</button>
                      </div>
                    </form>
                  </div>
                  <!-- Right Column (31%) -->
                  <div class="col-md-4 p-3">
                    <h6 class="mb-3">Bill Details</h6>
                    <div class="mb-3">
                      <label for="billServiceName" class="form-label">Service Name</label>
                      <div class="input-group input-group-sm">
                        <span class="input-group-text"><i class="fas fa-concierge-bell"></i></span>
                        <input type="text" class="form-control" id="billServiceName" readonly>
                      </div>
                    </div>
                    <div class="mb-3">
                      <label for="billDoctorName" class="form-label">Doctor Name</label>
                      <div class="input-group input-group-sm">
                        <span class="input-group-text"><i class="fas fa-user-md"></i></span>
                        <input type="text" class="form-control" id="billDoctorName" readonly>
                      </div>
                    </div>
                    <div class="mb-3">
                      <label for="billAppointmentDate" class="form-label">Appointment Date & Time</label>
                      <div class="input-group input-group-sm">
                        <span class="input-group-text"><i class="fas fa-calendar-check"></i></span>
                        <input type="text" class="form-control" id="billAppointmentDate" placeholder="YYYY-MM-DD HH:mm" readonly>
                      </div>
                    </div>
                    <div class="mb-3">
                      <label for="billDuration" class="form-label">Duration (minutes)</label>
                      <div class="input-group input-group-sm">
                        <span class="input-group-text"><i class="fas fa-clock"></i></span>
                        <input type="number" class="form-control" id="billDuration" min="1" readonly>
                      </div>
                    </div>
                    <div class="mb-3">
                      <label for="billType" class="form-label">Type</label>
                      <div class="input-group input-group-sm">
                        <span class="input-group-text"><i class="fas fa-stethoscope"></i></span>
                        <select class="form-select" id="billType" disabled>
                          <option value="in_person" selected>In Person</option>
                          <option value="teleconsult">Teleconsult</option>
                        </select>
                      </div>
                    </div>
                    <div class="d-flex justify-content-between">
                      <button type="button" class="btn btn-danger btn-sm" id="cancelBillBtn">Cancel</button>
                      <button type="button" class="btn btn-primary btn-sm" id="createBillBtn">Create</button>
                    </div>
                    <button type="button" class="btn btn-secondary btn-sm mt-3 w-100" id="goBackBtn">Go Back</button>
                  </div>
                </div>
              </div>
              <!-- Bills Tab -->
              <div class="tab-pane fade" id="bills" role="tabpanel" aria-labelledby="billsTab">
                <div class="container-fluid py-3">
                  <!-- Header with Navigation and Create Bill Button -->
                  <div class="d-flex justify-content-between align-items-center mb-3">
                    <h5 class="mb-0">Bills</h5>
                    <div>
                      <ul class="nav nav-pills bills-filter me-3" id="billsNav">
                        <li class="nav-item">
                          <a class="nav-link active" href="#" data-filter="all">All</a>
                        </li>
                        <li class="nav-item">
                          <a class="nav-link" href="#" data-filter="paid">Paid</a>
                        </li>
                        <li class="nav-item">
                          <a class="nav-link" href="#" data-filter="partially-paid">Partially Paid</a>
                        </li>
                        <li class="nav-item">
                          <a class="nav-link" href="#" data-filter="pending">Pending</a>
                        </li>
                      </ul>
                    </div>
                    <button class="btn btn-primary btn-sm" id="createNewBillBtn" data-action="all-bills">
                      <i class="fas fa-plus me-1"></i> Create New Bill
                    </button>
                  </div>
                  <!-- Bills Table -->
                  <div class="card">
                    <div class="card-body">
                      <table class="table table-striped table-bordered" id="billsTable">
                        <thead>
                          <tr>
                            <th>Edit</th>
                            <th>#</th>
                            <th>Bill ID</th>
                            <th>Patient</th>
                            <th>Date</th>
                            <th>Status</th>
                            <th>Total Amount</th>
                            <th>Deposit Amount</th>
                            <th>Actions</th>
                          </tr>
                        </thead>
                        <tbody></tbody>
                      </table>
                    </div>
                    <!-- Pagination -->
                    <div class="card-footer d-flex justify-content-between align-items-center">
                      <div>
                        <span id="billsTableInfo">Showing 0 of 0 entries</span>
                      </div>
                      <nav>
                        <ul class="pagination pagination-sm mb-0">
                          <li class="page-item"><a class="page-link" href="#" id="billsPrevPage">Previous</a></li>
                          <li class="page-item"><a class="page-link" href="#" id="billsNextPage">Next</a></li>
                        </ul>
                      </nav>
                    </div>
                  </div>
                </div>
              </div>
              <!-- Payments Tab -->
              <div class="tab-pane fade" id="payments" role="tabpanel" aria-labelledby="paymentsTab">
                <form id="addPaymentsForm">
                  <div class="mb-2">
                    <label for="paymentAmount" class="form-label">Amount (₹)</label>
                    <input type="number" class="form-control form-control-sm" id="paymentAmount" required>
                  </div>
                  <div class="mb-2">
                    <label for="paymentMethod" class="form-label">Payment Method</label>
                    <select class="form-select form-select-sm" id="paymentMethod" required>
                      <option value="" disabled selected>Select Method</option>
                      <option value="Cash">Cash</option>
                      <option value="Card">Card</option>
                      <option value="UPI">UPI</option>
                      <option value="Bank Transfer">Bank Transfer</option>
                    </select>
                  </div>
                  <button type="submit" class="btn btn-primary btn-sm">Add Payment</button>
                </form>
              </div>
              <!-- Visits Tab -->
              <div class="tab-pane fade" id="visits" role="tabpanel" aria-labelledby="visitsTab">
                <div id="visitsTabContent"></div> <!-- Container for dynamic content -->
              </div>
              <!-- Lab Profile Tab -->
              <div class="tab-pane fade" id="labProfile" role="tabpanel" aria-labelledby="labProfileTab">
                <p>Lab Profile content goes here.</p>
              </div>
              <!-- Profile Tab -->
              <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profileTab">
                <div class="profile-content">
                  <h6 class="mb-3">Patient Profile</h6>
                  <form id="profileForm">
                    <!-- Required Fields Section -->
                    <h6 class="mb-3">Required Information</h6>
                    <div class="profile-addons mt-3">
                      <button type="button" class="btn btn-secondary btn-sm" id="editProfileBtn">Edit Profile</button>
                      <button type="button" class="btn btn-info btn-sm" id="viewAppointmentsBtn">View Appointments</button>
                      <button type="button" class="btn btn-primary btn-sm" id="addBillFromProfileBtn">Add Bill</button>
                    </div>
                    <!-- Row 1: Patient Name and Phone Number -->
                    <div class="row mb-3">
                      <div class="col-md-4"><label for="profileFirstName" class="form-label">First Name</label><div class="input-group input-group-sm"><span class="input-group-text"><i class="fas fa-user"></i></span><input type="text" class="form-control" id="profileFirstName" readonly></div></div>
                      <div class="col-md-4"><label for="profileLastName" class="form-label">Last Name</label><div class="input-group input-group-sm"><span class="input-group-text"><i class="fas fa-user"></i></span><input type="text" class="form-control" id="profileLastName" readonly></div></div>
                      <div class="col-md-4"><label for="profilePhone" class="form-label">Phone Number</label><div class="input-group input-group-sm"><span class="input-group-text"><i class="fas fa-phone"></i></span><input type="text" class="form-control" id="profilePhone" readonly></div></div>
                    </div>
                    <div class="row mb-3">
                      <div class="col-md-4"><label for="profileGender" class="form-label">Gender</label><div class="input-group input-group-sm"><span class="input-group-text"><i class="fas fa-venus-mars"></i></span><input type="text" class="form-control" id="profileGender" readonly></div></div>
                      <div class="col-md-4"><label for="profileDOB" class="form-label">Date of Birth</label><div class="input-group input-group-sm"><span class="input-group-text"><i class="fas fa-calendar-alt"></i></span><input type="text" class="form-control" id="profileDOB" placeholder="YYYY-MM-DD" readonly></div></div>
                      <div class="col-md-4"><label for="profilePreferredLanguage" class="form-label">Preferred Language</label><div class="input-group input-group-sm"><span class="input-group-text"><i class="fas fa-language"></i></span><input type="text" class="form-control" id="profilePreferredLanguage" readonly></div></div>
                    </div>
                    <div class="row mb-3">
                      <div class="col-md-4"><label for="profileFatherName" class="form-label">Father's Name</label><div class="input-group input-group-sm"><span class="input-group-text"><i class="fas fa-user-tie"></i></span><input type="text" class="form-control" id="profileFatherName" readonly></div></div>
                      <div class="col-md-4"><label for="profileMaritalStatus" class="form-label">Marital Status</label><div class="input-group input-group-sm"><span class="input-group-text"><i class="fas fa-ring"></i></span><input type="text" class="form-control" id="profileMaritalStatus" readonly></div></div>
                      <div class="col-md-4"><label for="profilePaymentPreference" class="form-label">Payment Preference</label><div class="input-group input-group-sm"><span class="input-group-text"><i class="fas fa-money-bill"></i></span><input type="text" class="form-control" id="profilePaymentPreference" readonly></div></div>
                    </div>
                    <div class="row mb-3">
                      <div class="col-md-4"><label for="profileAppointmentDate" class="form-label">Appointment Date</label><div class="input-group input-group-sm"><span class="input-group-text"><i class="fas fa-calendar-check"></i></span><input type="text" class="form-control" id="profileAppointmentDate" placeholder="YYYY-MM-DD HH:mm" readonly></div></div>
                    </div>
                    <!-- Optional Fields Section -->
                    <h6 class="mb-3 mt-4">Additional Information</h6>
                    <!-- Row 5: City, Address, Pin -->
                    <div class="row mb-3">
                      <div class="col-md-4">
                        <label for="profileCity" class="form-label">City</label>
                        <div class="input-group input-group-sm">
                          <span class="input-group-text"><i class="fas fa-city"></i></span>
                          <input type="text" class="form-control" id="profileCity" readonly>
                        </div>
                      </div>
                      <div class="col-md-4">
                        <label for="profileAddress" class="form-label">Address</label>
                        <div class="input-group input-group-sm">
                          <span class="input-group-text"><i class="fas fa-home"></i></span>
                          <input type="text" class="form-control" id="profileAddress" readonly>
                        </div>
                      </div>
                      <div class="col-md-4">
                        <label for="profilePin" class="form-label">Pin</label>
                        <div class="input-group input-group-sm">
                          <span class="input-group-text"><i class="fas fa-map-pin"></i></span>
                          <input type="text" class="form-control" id="profilePin" readonly>
                        </div>
                      </div>
                    </div>
                    <!-- Row 6: Marital Since, Blood Group -->
                    <div class="row mb-3">
                      <div class="col-md-4">
                        <label for="profileMaritalSince" class="form-label">Marital Since</label>
                        <div class="input-group input-group-sm">
                          <span class="input-group-text"><i class="fas fa-calendar-alt"></i></span>
                          <input type="text" class="form-control" id="profileMaritalSince" placeholder="YYYY-MM-DD" readonly>
                        </div>
                      </div>
                      <div class="col-md-4">
                        <label for="profileBloodGroup" class="form-label">Blood Group</label>
                        <div class="input-group input-group-sm">
                          <span class="input-group-text"><i class="fas fa-tint"></i></span>
                          <input type="text" class="form-control" id="profileBloodGroup" readonly>
                        </div>
                      </div>
                    </div>
                    <!-- Row 7: Referred By, Doctor, Doctor Specialty -->
                    <div class="row mb-3">
                      <div class="col-md-4">
                        <label for="profileReferredBy" class="form-label">Referred By</label>
                        <div class="input-group input-group-sm">
                          <span class="input-group-text"><i class="fas fa-user-plus"></i></span>
                          <input type="text" class="form-control" id="profileReferredBy" readonly>
                        </div>
                      </div>
                      <div class="col-md-4">
                        <label for="profileDoctor" class="form-label">Doctor</label>
                        <div class="input-group input-group-sm">
                          <span class="input-group-text"><i class="fas fa-user-md"></i></span>
                          <input type="text" class="form-control" id="profileDoctor" readonly>
                        </div>
                      </div>
                      <div class="col-md-4">
                        <label for="profileDoctorSpecialty" class="form-label">Specialty</label>
                        <div class="input-group input-group-sm">
                          <span class="input-group-text"><i class="fas fa-stethoscope"></i></span>
                          <input type="text" class="form-control" id="profileDoctorSpecialty" readonly>
                        </div>
                      </div>
                    </div>
                    <!-- Row 8: Channel, CIO -->
                    <div class="row mb-3">
                      <div class="col-md-6">
                        <label for="profileChannel" class="form-label">Channel</label>
                        <div class="input-group input-group-sm">
                          <span class="input-group-text"><i class="fas fa-bullhorn"></i></span>
                          <input type="text" class="form-control" id="profileChannel" readonly>
                        </div>
                      </div>
                      <div class="col-md-6">
                        <label for="profileCIO" class="form-label">CIO</label>
                        <div class="input-group input-group-sm">
                          <span class="input-group-text"><i class="fas fa-info-circle"></i></span>
                          <input type="text" class="form-control" id="profileCIO" readonly>
                        </div>
                      </div>
                    </div>
                    <!-- Row 9: Occupation, Tag -->
                    <div class="row mb-3">
                      <div class="col-md-6">
                        <label for="profileOccupation" class="form-label">Occupation</label>
                        <div class="input-group input-group-sm">
                          <span class="input-group-text"><i class="fas fa-briefcase"></i></span>
                          <input type="text" class="form-control" id="profileOccupation" readonly>
                        </div>
                      </div>
                      <div class="col-md-6">
                        <label for="profileTag" class="form-label">Tag</label>
                        <div class="input-group input-group-sm">
                          <span class="input-group-text"><i class="fas fa-tag"></i></span>
                          <input type="text" class="form-control" id="profileTag" readonly>
                        </div>
                      </div>
                    </div>
                    <!-- Row 10: Mobile 2, Aadhar Number -->
                    <div class="row mb-3">
                      <div class="col-md-6">
                        <label for="profileMobile2" class="form-label">Mobile 2</label>
                        <div class="input-group input-group-sm">
                          <span class="input-group-text"><i class="fas fa-mobile-alt"></i></span>
                          <input type="text" class="form-control" id="profileMobile2" readonly>
                        </div>
                      </div>
                      <div class="col-md-6">
                        <label for="profileAadharNumber" class="form-label">Aadhar Number</label>
                        <div class="input-group input-group-sm">
                          <span class="input-group-text"><i class="fas fa-id-card"></i></span>
                          <input type="text" class="form-control" id="profileAadharNumber" readonly>
                        </div>
                      </div>
                    </div>
                    <!-- Row 11: Known Allergies, Current Medications -->
                    <div class="row mb-3">
                      <div class="col-md-6">
                        <label for="profileKnownAllergies" class="form-label">Known Allergies</label>
                        <div class="input-group input-group-sm">
                          <span class="input-group-text"><i class="fas fa-allergies"></i></span>
                          <input type="text" class="form-control" id="profileKnownAllergies" readonly>
                        </div>
                      </div>
                      <div class="col-md-6">
                        <label for="profileCurrentMedications" class="form-label">Current Medications</label>
                        <div class="input-group input-group-sm">
                          <span class="input-group-text"><i class="fas fa-pills"></i></span>
                          <input type="text" class="form-control" id="profileCurrentMedications" readonly>
                        </div>
                      </div>
                    </div>
                    <!-- Row 12: Past Medical History, Specific Notes -->
                    <div class="row mb-3">
                      <div class="col-md-6">
                        <label for="profilePastMedicalHistory" class="form-label">Past Medical History</label>
                        <div class="input-group input-group-sm">
                          <span class="input-group-text"><i class="fas fa-history"></i></span>
                          <input type="text" class="form-control" id="profilePastMedicalHistory" readonly>
                        </div>
                      </div>
                      <div class="col-md-6">
                        <label for="profileSpecificNotes" class="form-label">Specific Notes</label>
                        <div class="input-group input-group-sm">
                          <span class="input-group-text"><i class="fas fa-sticky-note"></i></span>
                          <input type="text" class="form-control" id="profileSpecificNotes" readonly>
                        </div>
                      </div>
                    </div>
                    <!-- Row 13: Emergency Contact Details -->
                    <div class="row mb-3">
                      <div class="col-md-4">
                        <label for="profileEmergencyContactName" class="form-label">Emergency Contact Name</label>
                        <div class="input-group input-group-sm">
                          <span class="input-group-text"><i class="fas fa-user"></i></span>
                          <input type="text" class="form-control" id="profileEmergencyContactName" readonly>
                        </div>
                      </div>
                      <div class="col-md-4">
                        <label for="profileEmergencyContactRelationship" class="form-label">Relationship</label>
                        <div class="input-group input-group-sm">
                          <span class="input-group-text"><i class="fas fa-users"></i></span>
                          <input type="text" class="form-control" id="profileEmergencyContactRelationship" readonly>
                        </div>
                      </div>
                      <div class="col-md-4">
                        <label for="profileEmergencyContactNumber" class="form-label">Emergency Contact Number</label>
                        <div class="input-group input-group-sm">
                          <span class="input-group-text"><i class="fas fa-phone"></i></span>
                          <input type="text" class="form-control" id="profileEmergencyContactNumber" readonly>
                        </div>
                      </div>
                    </div>
                    <!-- Row 14: Insurance Details -->
                    <div class="row mb-3">
                      <div class="col-md-4">
                        <label for="profileInsuranceProvider" class="form-label">Insurance Provider</label>
                        <div class="input-group input-group-sm">
                          <span class="input-group-text"><i class="fas fa-shield-alt"></i></span>
                          <input type="text" class="form-control" id="profileInsuranceProvider" readonly>
                        </div>
                      </div>
                      <div class="col-md-4">
                        <label for="profilePolicyNumber" class="form-label">Policy Number</label>
                        <div class="input-group input-group-sm">
                          <span class="input-group-text"><i class="fas fa-file-alt"></i></span>
                          <input type="text" class="form-control" id="profilePolicyNumber" readonly>
                        </div>
                      </div>
                    </div>
                    <!-- Row 15: Admission Type, Hospital Code -->
                    <div class="row mb-3">
                      <div class="col-md-6">
                        <label for="profileAdmissionType" class="form-label">Admission Type</label>
                        <div class="input-group input-group-sm">
                          <span class="input-group-text"><i class="fas fa-hospital"></i></span>
                          <input type="text" class="form-control" id="profileAdmissionType" readonly>
                        </div>
                      </div>
                      <div class="col-md-6">
                        <label for="profileHospitalCode" class="form-label">Hospital Code</label>
                        <div class="input-group input-group-sm">
                          <span class="input-group-text"><i class="fas fa-hospital-symbol"></i></span>
                          <input type="text" class="form-control" id="profileHospitalCode" readonly>
                        </div>
                      </div>
                    </div>
                    <!-- Row 16: Appointment Notes -->
                    <div class="row mb-3">
                      <div class="col-md-12">
                        <label for="profileAppointmentNotes" class="form-label">Appointment Notes</label>
                        <div class="input-group input-group-sm">
                          <span class="input-group-text"><i class="fas fa-notes-medical"></i></span>
                          <textarea class="form-control" id="profileAppointmentNotes" rows="3" readonly></textarea>
                        </div>
                      </div>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
          <div class="sidebar-content-area" id="sidebarContentArea" style="display: none;">
            <div class="tab-content" id="sidebarTabContent">
              <!-- Sidebar content will be dynamically populated -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS and Dependencies -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
  <!-- Select2 JS -->
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
  <!-- Intl Tel Input JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/intlTelInput.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <!-- FullCalendar JS -->
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.5/main.min.js"></script>
  <!-- Bootstrap Datepicker CSS -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css" rel="stylesheet">
<!-- jQuery (if not already included) -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<!-- Bootstrap Datepicker JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
  <!-- Custom JS -->
  <script src="main.js"></script>
  <script src="clicks.js"></script>
</body>
</html>