<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Kerala | Doctors</title>

  <!-- CSS -->
  <link rel="stylesheet" href="assets/vendors/mdi/css/materialdesignicons.min.css">
  <link rel="stylesheet" href="assets/vendors/ti-icons/css/themify-icons.css">
  <link rel="stylesheet" href="assets/vendors/css/vendor.bundle.base.css">
  <link rel="stylesheet" href="assets/vendors/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="assets/vendors/bootstrap-datepicker/bootstrap-datepicker.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/css/intlTelInput.min.css">
  <link rel="stylesheet" href="assets/css/style.css">
  <link rel="shortcut icon" href="assets/images/favicon.png">

  <!-- JavaScript -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/intlTelInput.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js"></script>
  <!-- Flatpickr CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<!-- Flatpickr JS -->
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>


  <!-- Custom Styles -->
  <style>
    /* Style the Flatpickr calendar */
.flatpickr-calendar {
  z-index: 1200; /* Ensure it appears above modals */
  border-radius: 5px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
}

.flatpickr-day.selected {
  background-color: #007bff;
  color: white;
}

/* Custom OK button styling */
.flatpickr-confirm {
  background-color: #007bff;
  color: white;
  border: none;
  padding: 5px 10px;
  border-radius: 3px;
  cursor: pointer;
}

/* Custom Clear button styling */
.flatpickr-clear {
  background-color: #dc3545; /* Red for clear, matches Bootstrap danger */
  color: white;
  border: none;
  padding: 5px 10px;
  border-radius: 3px;
  cursor: pointer;
}

.flatpickr-confirm:hover {
  background-color: #0056b3;
}

.flatpickr-clear:hover {
  background-color: #c82333;
}
    #customNotification .modal-content {
      border: none;
      border-radius: 0.5rem;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    
    #customNotification.success-message .modal-body {
      background-color: #d4edda;
      color: #155724;
    }
    
    #customNotification.error-message .modal-body {
      background-color: #f8d7da;
      color: #721c24;
    }
    
    @keyframes fadeInOut {
      0% { opacity: 0; transform: translateY(-20px); }
      20% { opacity: 1; transform: translateY(0); }
      80% { opacity: 1; transform: translateY(0); }
      100% { opacity: 0; transform: translateY(-20px); }
    }
    
    
    /* Ensure tab content is scrollable if too tall */
.tab-content {
  max-height: 400px; /* Adjust as needed */
  overflow-y: auto;
}

/* Style for disabled tabs */
.nav-tabs .nav-link.disabled {
  color: #6c757d;
  pointer-events: none;
  background-color: #e9ecef;
}
#alertContainer .alert {
  margin-bottom: 10px;
  animation: fadeInOut 2.0s ease-in-out;
}
    .table-responsive {
      max-height: 400px;
      overflow-y: auto;
      position: relative;
    }
    .table {
      table-layout: auto;
      width: 100%;
      border-collapse: collapse;
    }
    .table th, .table td {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      font-size: 14px;
      padding: 8px;
      text-align: left;
    }
    .table thead th {
      position: sticky;
      top: 0;
      background-color: #fff;
      z-index: 1;
    }
    .table .btn {
      font-size: 12px;
      padding: 5px 8px;
      margin: 2px;
    }
    .search-filter {
      margin-bottom: 15px;
    }
    .search-filter input, .search-filter select {
      font-size: 14px;
      padding: 6px;
    }
    .modal-content {
      border-radius: 5px;
    }
    .success-message { color: green; }
    .error-message { color: red; }
    /* Ensure modals stack correctly */
    .modal {
      z-index: 1055; /* Default Bootstrap modal z-index is 1050, increase for stacking */
    }
    .form-control-sm, .form-select-sm {
      padding: 0.25rem 0.5rem;
      font-size: 0.875rem;
    }
    .form-control.is-invalid, .form-select.is-invalid {
      border-color: #dc3545;
    }
    .form-control.is-invalid:focus, .form-select.is-invalid:focus {
      box-shadow: 0 0 0 0.2rem rgba(220, 53, 69, 0.25);
    }
    label {
      font-size: 0.875rem;
      margin-bottom: 0.25rem;
    }
    .modal-body {
      padding: 1rem;
      max-height: 70vh;
      overflow-y: auto;
    }

     /* Add styling for the new patient search filter */
     .patient-search-container {
      margin-bottom: 20px;
    }
    #patientSearchInput {
      width: 100%;
      padding: 8px;
      font-size: 14px;
    }
    #patientSearchResults {
      position: absolute;
      z-index: 1060; /* Above modals */
      background: white;
      border: 1px solid #ddd;
      max-height: 200px;
      overflow-y: auto;
      width: calc(100% - 30px); /* Match input width */
    }
    #patientSearchResults div {
      padding: 8px;
      cursor: pointer;
    }
    #patientSearchResults div:hover {
      background-color: #f0f0f0;
    }
    .modal-backdrop {
      z-index: 1050; /* Ensure backdrop is below modal */
    }
    @media (max-width: 768px) {
      .table th, .table td { font-size: 12px; padding: 6px; }
      .table .btn { font-size: 10px; padding: 4px 6px; }
      .search-filter input, .search-filter select { font-size: 12px; }
    }
    @media (max-width: 480px) {
      .table th, .table td { font-size: 10px; padding: 4px; }
      .table .btn { font-size: 9px; padding: 3px 5px; }
    }
    .search-filter label {
      font-size: 14px;
      white-space: nowrap;
    }
  </style>
</head>
<body>
  <div class="container-scroller">
    <!-- Top Banner -->
    <div class="row p-0 m-0 proBanner" id="proBanner">
      <div class="col-md-12 p-0 m-0">
        <div class="card-body card-body-padding d-flex align-items-center justify-content-between">
          <div class="ps-lg-3">
            <p class="mb-0 font-weight-medium me-3 buy-now-text">Free 24/7 customer support, updates</p>
            <a href="#" target="_blank" class="btn me-2 buy-now-btn border-0">Book Appointment</a>
          </div>
          <div class="d-flex align-items-center">
            <a href="#"><i class="mdi mdi-home me-3 text-white"></i></a>
            <button id="bannerClose" class="btn border-0 p-0"><i class="mdi mdi-close text-white"></i></button>
          </div>
        </div>
      </div>
    </div>

    <!-- Navbar -->
    <nav class="navbar default-layout-navbar col-lg-12 col-12 p-0 fixed-top d-flex flex-row">
      <div class="text-center navbar-brand-wrapper d-flex align-items-center justify-content-start">
        <a class="navbar-brand brand-logo" href="index.html"><img src="assets/images/logo.png" alt="logo" height="190px"></a>
      </div>
      <div class="navbar-menu-wrapper d-flex align-items-stretch">
        <button class="navbar-toggler navbar-toggler align-self-center" type="button" data-bs-toggle="minimize">
          <span class="mdi mdi-menu"></span>
        </button>
        <div class="search-field d-none d-md-block">
          <form class="d-flex align-items-center h-100">
            <div class="input-group">
              <div class="input-group-prepend bg-transparent">
                <i class="input-group-text border-0 mdi mdi-magnify"></i>
              </div>
              <input type="text" class="form-control bg-transparent border-0" placeholder="Search patients, appointments">
            </div>
          </form>
        </div>

        <ul class="navbar-nav navbar-nav-right">
          <li class="nav-item nav-profile dropdown">
            <a class="nav-link dropdown-toggle" id="profileDropdown" href="#" data-bs-toggle="dropdown" aria-expanded="false">
              <div class="nav-profile-img">
                <img src="assets/images/placeholder-doctor.jpg" alt="profile" id="doctor-profile-picture">
                <span class="availability-status online"></span>
              </div>
              <div class="nav-profile-text">
                <p class="mb-1 text-black"><span id="logged_in_user_name"></span></p>
              </div>
            </a>
            <div class="dropdown-menu navbar-dropdown" aria-labelledby="profileDropdown">
              <a class="dropdown-item" href="#"><i class="mdi mdi-account-circle me-2 text-success"></i> My Profile</a>
              <div class="dropdown-divider"></div>
              <a class="dropdown-item" href="#" id="logoutDropdown"><i class="mdi mdi-logout me-2 text-primary"></i> Logout</a>
            </div>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link count-indicator dropdown-toggle" id="messageDropdown" href="#" data-bs-toggle="dropdown" aria-expanded="false">
              <i class="mdi mdi-email-outline"></i>
              <span class="count-symbol bg-warning" id="message-count">3</span>
            </a>
            <div class="dropdown-menu dropdown-menu-end navbar-dropdown preview-list" aria-labelledby="messageDropdown">
              <h6 class="p-3 mb-0">Messages</h6>
              <div id="message-list"><p class="text-gray mb-0 text-center">No new messages</p></div>
              <div class="dropdown-divider"></div>
              <h6 class="p-3 mb-0 text-center">See all messages</h6>
            </div>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link count-indicator dropdown-toggle" id="notificationDropdown" href="#" data-bs-toggle="dropdown" aria-expanded="false">
              <i class="mdi mdi-bell-outline"></i>
              <span class="count-symbol bg-danger" id="notification-count">5</span>
            </a>
            <div class="dropdown-menu dropdown-menu-end navbar-dropdown preview-list" aria-labelledby="notificationDropdown">
              <h6 class="p-3 mb-0">Notifications</h6>
              <div id="notification-list"><p class="text-gray mb-0 text-center">No new notifications</p></div>
              <div class="dropdown-divider"></div>
              <h6 class="p-3 mb-0 text-center">See all notifications</h6>
            </div>
          </li>
          <li class="nav-item nav-logout d-none d-lg-block">
            <a class="nav-link" href="#" id="logoutButton"><i class="mdi mdi-power"> Logout</i></a>
          </li>
        </ul>
        <button class="navbar-toggler navbar-toggler-right d-lg-none align-self-center" type="button" data-bs-toggle="offcanvas">
          <span class="mdi mdi-menu"></span>
        </button>
      </div>
    </nav>
<!-- Custom Notification Modal -->
<div class="modal fade" id="customNotification" tabindex="-1" aria-hidden="true" style="z-index: 1060;">
  <div class="modal-dialog modal-dialog-centered modal-sm">
    <div class="modal-content">
      <div class="modal-body text-center" id="notificationMessage">
        <!-- Message will be injected here -->
      </div>
      <div class="modal-footer justify-content-center">
        <button type="button" class="btn btn-sm btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
    <!-- Main Content -->
    <div class="container-fluid page-body-wrapper">
      <!-- Sidebar -->
      <nav class="sidebar sidebar-offcanvas" id="sidebar">
        <ul class="nav">
          <li class="nav-item nav-profile">
            <a href="#" class="nav-link">
              <div class="nav-profile-image">
                <img src="assets/images/faces/face1.jpg" alt="profile">
                <span class="login-status online"></span>
              </div>
              <div class="nav-profile-text d-flex flex-column">
                <span class="font-weight-bold mb-2">Dr. David Grey</span>
                <span class="text-secondary text-small">Cardiologist</span>
              </div>
              <i class="mdi mdi-stethoscope text-primary nav-profile-badge"></i>
            </a>
          </li>
          <li class="nav-item"><a class="nav-link" href="index.html"><span class="menu-title">Dashboard</span><i class="mdi mdi-home menu-icon"></i></a></li>
          <li class="nav-item"><a class="nav-link" href="patients.html"><span class="menu-title">Patients</span><i class="mdi mdi-account-group menu-icon"></i></a></li>
          <li class="nav-item"><a class="nav-link" href="appointments.html"><span class="menu-title">Appointments</span><i class="mdi mdi-calendar-check menu-icon"></i></a></li>
          <li class="nav-item">
            <a class="nav-link" data-bs-toggle="collapse" href="#medical-records" aria-expanded="false" aria-controls="medical-records">
              <span class="menu-title">Medical Records</span><i class="menu-arrow"></i><i class="mdi mdi-folder-multiple menu-icon"></i>
            </a>
            <div class="collapse" id="medical-records">
              <ul class="nav flex-column sub-menu">
                <li class="nav-item"><a class="nav-link" href="records/view-records.html">View Records</a></li>
                <li class="nav-item"><a class="nav-link" href="records/upload-records.html">Upload Records</a></li>
              </ul>
            </div>
          </li>
          <li class="nav-item"><a class="nav-link" href="prescriptions.html"><span class="menu-title">Prescriptions</span><i class="mdi mdi-pill menu-icon"></i></a></li>
          <li class="nav-item"><a class="nav-link" href="reports.html"><span class="menu-title">Reports</span><i class="mdi mdi-chart-bar menu-icon"></i></a></li>
          <li class="nav-item"><a class="nav-link" href="lab-tests.html"><span class="menu-title">Lab Tests</span><i class="mdi mdi-flask-outline menu-icon"></i></a></li>
          <li class="nav-item"><a class="nav-link" href="settings.html"><span class="menu-title">Settings</span><i class="mdi mdi-settings menu-icon"></i></a></li>
        </ul>
      </nav>

      <!-- Main Panel -->
      <div class="main-panel">
        <div class="content-wrapper">
          <div class="page-header">
            <h3 class="page-title">
              <span class="page-title-icon bg-gradient-primary text-white me-2"><i class="mdi mdi-home"></i></span> Dashboard
            </h3>
            <nav aria-label="breadcrumb">
              <ul class="breadcrumb">
                <li class="breadcrumb-item active" aria-current="page">
                  Welcome, <span id="logged_in_user_name_breadcrumb"></span> - Good <span id="timeOfDay">Morning</span>
                </li>
              </ul>
            </nav>
          </div>
              
          <div id="alertContainer" class="mb-3"></div> <!-- Alert container -->
                <!-- Rest of your content -->
          <!-- Notification Modal -->
          <div class="modal fade" id="notificationModal" tabindex="-1" aria-labelledby="notificationModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="notificationModalLabel">Notification</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  <p id="notificationMessage"></p>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
              </div>
            </div>
          </div>
           <!-- New Patient Search Filter -->
           <div class="row g-2">
            <div class="col-md-12">
              <div class="patient-search-container">
                <input type="text" class="form-control" id="patientSearchInput" placeholder="Search for a patient (Name, ID, Mobile, DOB) to make an appointment...">
                <div id="patientSearchResults" class="dropdown-menu" style="display: none;"></div>
              </div>
            </div>
          </div>

          <!-- Tabbed Table Section -->
          <div class="row">
            <div class="col-md-12 stretch-card">
              <div class="card">
                <div class="card-body">
                  <h4 class="card-title">Current Patient Details & Appointments</h4>
                  <div class="d-flex justify-content-between mb-3">
                    <div>
                      <button class="btn btn-success btn-sm d-none me-2" id="cancelBtn" onclick="bulkCancel()">Cancel</button>
                      <button class="btn btn-warning btn-sm d-none" id="rescheduleBtn" onclick="bulkReschedule()">Reschedule</button>
                    </div>
                    <button class="btn btn-primary btn-sm"><a href="search.html" class="text-white text-decoration-none">Search Patient</a></button>
                  </div>

                  <!-- Search Filter -->
                  <div class="search-filter row g-2">
                    <div class="col-md-3">
                      <input type="text" class="form-control" id="searchPatientId" placeholder="Patient ID">
                    </div>
                    <div class="col-md-3">
                      <input type="text" class="form-control" id="searchName" placeholder="Patient Name">
                    </div>
                    <div class="col-md-2">
                      <input type="text" class="form-control" id="searchMobile" placeholder="Mobile Number">
                    </div>
                    <div class="col-md-2 d-flex align-items-center">
                      <label for="searchDob" class="me-2">DOB:</label>
                      <input type="text" class="form-control custom-datetime-picker" id="searchDob">
                    </div>
                    <div class="col-md-2 d-flex align-items-center">
                      <label for="searchDate" class="me-2">Appt. Date:</label>
                      <input type="text" class="form-control custom-datetime-picker" id="searchDate">
                    </div>
                  </div>

                  <!-- Tabs -->
                  <ul class="nav nav-tabs" id="appointmentTabs" role="tablist">
                    <li class="nav-item"><a class="nav-link active" id="waiting-tab" data-bs-toggle="tab" href="#waiting" role="tab">Waiting in Clinic</a></li>
                    <li class="nav-item"><a class="nav-link" id="scheduled-tab" data-bs-toggle="tab" href="#scheduled" role="tab">Scheduled</a></li>
                    <li class="nav-item"><a class="nav-link" id="pending-tab" data-bs-toggle="tab" href="#pending" role="tab">Pending</a></li>
                    <li class="nav-item"><a class="nav-link" id="completed-tab" data-bs-toggle="tab" href="#completed" role="tab">Completed</a></li>
                    <li class="nav-item"><a class="nav-link" id="canceled-tab" data-bs-toggle="tab" href="#canceled" role="tab">Canceled</a></li>
                    <li class="nav-item"><a class="nav-link" id="rescheduled-tab" data-bs-toggle="tab" href="#rescheduled" role="tab">Rescheduled</a></li>
                  </ul>

                  <!-- Tab Content -->
                  <div class="tab-content mt-3" id="appointmentTabContent">
                    <div class="tab-pane fade show active" id="waiting" role="tabpanel">
                      <button class="btn btn-primary btn-sm mb-3" onclick="showAppointmentForm()">Add Appointment</button>
                      <div class="table-responsive">
                        <table class="table">
                          <thead><tr></tr></thead>
                          <tbody id="Waiting-tbody"></tbody>
                        </table>
                      </div>
                    </div>
                    <div class="tab-pane fade" id="scheduled" role="tabpanel">
                      <button class="btn btn-primary btn-sm mb-3" onclick="showAppointmentForm()">Add Appointment</button>
                      <div class="table-responsive">
                        <table class="table">
                          <thead><tr></tr></thead>
                          <tbody id="Scheduled-tbody"></tbody>
                        </table>
                      </div>
                    </div>
                    <div class="tab-pane fade" id="pending" role="tabpanel">
                      <button class="btn btn-primary btn-sm mb-3" onclick="showAppointmentForm()">Add Appointment</button>
                      <div class="table-responsive">
                        <table class="table">
                          <thead><tr></tr></thead>
                          <tbody id="Pending-tbody"></tbody>
                        </table>
                      </div>
                    </div>
                    <div class="tab-pane fade" id="completed" role="tabpanel">
                      <button class="btn btn-primary btn-sm mb-3" onclick="showAppointmentForm()">Add Appointment</button>
                      <div class="table-responsive">
                        <table class="table">
                          <thead><tr></tr></thead>
                          <tbody id="Completed-tbody"></tbody>
                        </table>
                      </div>
                    </div>
                    <div class="tab-pane fade" id="canceled" role="tabpanel">
                      <button class="btn btn-primary btn-sm mb-3" onclick="showAppointmentForm()">Add Appointment</button>
                      <div class="table-responsive">
                        <table class="table">
                          <thead><tr></tr></thead>
                          <tbody id="Canceled-tbody"></tbody>
                        </table>
                      </div>
                    </div>
                    <div class="tab-pane fade" id="rescheduled" role="tabpanel">
                      <button class="btn btn-primary btn-sm mb-3" onclick="showAppointmentForm()">Add Appointment</button>
                      <div class="table-responsive">
                        <table class="table">
                          <thead><tr></tr></thead>
                          <tbody id="Rescheduled-tbody"></tbody>
                        </table>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

             <!-- New Patient Details Modal -->
             <div class="modal fade" id="patientDetailsModal" tabindex="-1" aria-labelledby="patientDetailsModalLabel" aria-hidden="true">
              <div class="modal-dialog modal-lg">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="patientDetailsModalLabel">Patient Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body" id="patientDetailsContent">
                    <!-- Patient details will be populated here -->
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-primary" id="makeAppointmentFromPatientBtn">Make Appointment</button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                  </div>
                </div>
              </div>
            </div>
         <!-- Create Patient Modal -->
<div class="modal fade" id="createPatientModal" tabindex="-1" aria-labelledby="createPatientModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="createPatientModalLabel">Create New Patient</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form id="createPatientForm">
          <!-- Accordion Sections -->
          <div class="accordion" id="patientFormAccordion">
            <!-- Basic Information Section (Expanded by Default) -->
            <div class="accordion-item">
              <h2 class="accordion-header" id="headingBasic">
                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseBasic" aria-expanded="true" aria-controls="collapseBasic">
                  Basic Information
                </button>
              </h2>
              <div id="collapseBasic" class="accordion-collapse collapse show" aria-labelledby="headingBasic" data-bs-parent="#patientFormAccordion">
                <div class="accordion-body">
                  <div class="row g-3">
                    <div class="col-md-6">
                      <label for="patientFirstName">First Name <span class="text-danger">*</span></label>
                      <input type="text" id="patientFirstName" class="form-control form-control-sm" required>
                    </div>
                    <div class="col-md-6">
                      <label for="patientLastName">Last Name <span class="text-danger">*</span></label>
                      <input type="text" id="patientLastName" class="form-control form-control-sm" required>
                    </div>
                    <div class="col-md-4">
                      <label for="patientGender">Gender <span class="text-danger">*</span></label>
                      <select id="patientGender" class="form-select form-select-sm" required>
                        <option value="" disabled selected>Select</option>
                        <option value="Male">Male</option>
                        <option value="Female">Female</option>
                        <option value="Other">Other</option>
                      </select>
                    </div>
                    <div class="col-md-4">
                      <label for="patientDob">Date of Birth <span class="text-danger">*</span></label>
                      <input type="text" id="patientDob" class="form-control form-control-sm custom-datetime-picker" required>
                    </div>
                    <div class="col-md-4">
                      <label for="patientAge">Age</label>
                      <input type="number" id="patientAge" class="form-control form-control-sm" readonly>
                    </div>
                    <div class="col-md-6">
                      <label for="patientFatherName">Father's Name <span class="text-danger">*</span></label>
                      <input type="text" id="patientFatherName" class="form-control form-control-sm" required>
                    </div>
                    <div class="col-md-6">
                      <label for="patientAddress">Address</label>
                      <input type="text" id="patientAddress" class="form-control form-control-sm">
                    </div>
                    <div class="col-md-4">
                      <label for="patientCity">City</label>
                      <input type="text" id="patientCity" class="form-control form-control-sm">
                    </div>
                    <div class="col-md-4">
                      <label for="patientPincode">Pincode</label>
                      <input type="number" id="patientPincode" class="form-control form-control-sm">
                    </div>
                    <div class="col-md-4">
                      <label for="patientEmail">Email</label>
                      <input type="email" id="patientEmail" class="form-control form-control-sm">
                    </div>
                    <div class="col-md-4">
                      <label for="patientMobile">Mobile <span class="text-danger">*</span></label>
                      <input type="tel" id="patientMobile" class="form-control form-control-sm" required>
                    </div>
                    <div class="col-md-4">
                      <label for="patientAltMobile">Alt Mobile</label>
                      <input type="tel" id="patientAltMobile" class="form-control form-control-sm">
                    </div>
                    <div class="col-md-4">
                      <label for="patientAadhar">Aadhar</label>
                      <input type="text" id="patientAadhar" class="form-control form-control-sm" maxlength="12">
                    </div>
                    <div class="col-md-4">
                      <label for="admissionType">Admission Type <span class="text-danger">*</span></label>
                      <select id="admissionType" class="form-select form-select-sm" required>
                        <option value="OU" selected>Outpatient</option>
                        <option value="IN">Inpatient</option>
                      </select>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Medical Information Section (Collapsed by Default) -->
            <div class="accordion-item">
              <h2 class="accordion-header" id="headingMedical">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseMedical" aria-expanded="false" aria-controls="collapseMedical">
                  Medical Information
                </button>
              </h2>
              <div id="collapseMedical" class="accordion-collapse collapse" aria-labelledby="headingMedical" data-bs-parent="#patientFormAccordion">
                <div class="accordion-body">
                  <div class="row g-3">
                    <div class="col-md-4">
                      <label for="patientBloodGroup">Blood Group</label>
                      <select id="patientBloodGroup" class="form-select form-select-sm">
                        <option value="">Select</option>
                        <option value="A+">A+</option>
                        <option value="A-">A-</option>
                        <option value="B+">B+</option>
                        <option value="B-">B-</option>
                        <option value="AB+">AB+</option>
                        <option value="AB-">AB-</option>
                        <option value="O+">O+</option>
                        <option value="O-">O-</option>
                      </select>
                    </div>
                    <div class="col-md-8">
                      <label for="patientAllergies">Allergies</label>
                      <textarea id="patientAllergies" class="form-control form-control-sm" rows="2"></textarea>
                    </div>
                    <div class="col-md-6">
                      <label for="patientMedications">Medications</label>
                      <textarea id="patientMedications" class="form-control form-control-sm" rows="2"></textarea>
                    </div>
                    <div class="col-md-6">
                      <label for="patientPastHistory">Past History</label>
                      <textarea id="patientPastHistory" class="form-control form-control-sm" rows="2"></textarea>
                    </div>
                    <div class="col-md-6">
                      <label for="patientNotes">Notes</label>
                      <textarea id="patientNotes" class="form-control form-control-sm" rows="2"></textarea>
                    </div>
                    <div class="col-md-6">
                      <label for="patientPrimaryDoctor">Primary Doctor</label>
                      <select id="patientPrimaryDoctor" class="form-select form-select-sm">
                        <option value="" disabled selected>Select</option>
                      </select>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Emergency Contact Section (Collapsed by Default) -->
            <div class="accordion-item">
              <h2 class="accordion-header" id="headingEmergency">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseEmergency" aria-expanded="false" aria-controls="collapseEmergency">
                  Emergency Contact
                </button>
              </h2>
              <div id="collapseEmergency" class="accordion-collapse collapse" aria-labelledby="headingEmergency" data-bs-parent="#patientFormAccordion">
                <div class="accordion-body">
                  <div class="row g-3">
                    <div class="col-md-4">
                      <label for="emergencyName">Name</label>
                      <input type="text" id="emergencyName" class="form-control form-control-sm">
                    </div>
                    <div class="col-md-4">
                      <label for="emergencyRelation">Relationship</label>
                      <input type="text" id="emergencyRelation" class="form-control form-control-sm">
                    </div>
                    <div class="col-md-4">
                      <label for="emergencyNumber">Number</label>
                      <input type="tel" id="emergencyNumber" class="form-control form-control-sm">
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Insurance & Billing Section (Collapsed by Default) -->
            <div class="accordion-item">
              <h2 class="accordion-header" id="headingInsurance">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInsurance" aria-expanded="false" aria-controls="collapseInsurance">
                  Insurance & Billing
                </button>
              </h2>
              <div id="collapseInsurance" class="accordion-collapse collapse" aria-labelledby="headingInsurance" data-bs-parent="#patientFormAccordion">
                <div class="accordion-body">
                  <div class="row g-3">
                    <div class="col-md-4">
                      <label for="insuranceProvider">Provider</label>
                      <input type="text" id="insuranceProvider" class="form-control form-control-sm">
                    </div>
                    <div class="col-md-4">
                      <label for="policyNumber">Policy No.</label>
                      <input type="text" id="policyNumber" class="form-control form-control-sm">
                    </div>
                    <div class="col-md-4">
                      <label for="paymentPreference">Payment</label>
                      <select id="paymentPreference" class="form-select form-select-sm">
                        <option value="">Select</option>
                        <option value="Cash">Cash</option>
                        <option value="Card">Card</option>
                        <option value="Insurance">Insurance</option>
                      </select>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" id="savePatientBtn">Save Patient</button>
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
        

          <!-- Appointment Form -->
          <div id="appointmentFormContainer" class="card mt-3" style="display: none;">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-center mb-3">
                <h5 class="card-title m-0">Create New Appointment</h5>
                <button type="button" class="btn btn-outline-primary" onclick="$('#createPatientModal').modal('show')">Add Patient</button>
              </div>
              <form id="appointmentForm">
                <div class="row">
                  <div class="col-md-4 mb-3">
                    <label for="patientID">Patient ID <span class="text-danger">*</span></label>
                    <input type="text" id="patientID" class="form-control" placeholder="Enter Patient ID" required>
                    <div class="invalid-feedback" id="patientIDFeedback"></div>
                  </div>
                  <div class="col-md-4 mb-3">
                    <label for="firstName">First Name</label>
                    <input type="text" id="firstName" class="form-control" readonly>
                  </div>
                  <div class="col-md-4 mb-3">
                    <label for="lastName">Last Name</label>
                    <input type="text" id="lastName" class="form-control" readonly>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-4 mb-3">
                    <label for="contactNumber">Contact Number</label>
                    <input type="tel" id="contactNumber" class="form-control" readonly>
                  </div>
                  <div class="col-md-4 mb-3">
                    <label for="dateOfBirth">Date of Birth</label>
                    <input type="text" id="dateOfBirth" class="form-control custom-datetime-picker" readonly>
                  </div>
                  <div class="col-md-4 mb-3">
                    <label for="age">Age</label>
                    <input type="number" id="age" class="form-control" readonly>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-4 mb-3">
                    <label for="appointmentDate">Appointment Date <span class="text-danger">*</span></label>
                    <input type="text" id="appointmentDate" class="form-control custom-datetime-picker" required>
                    <div class="invalid-feedback" id="appointmentDateFeedback"></div>
                  </div>
                  <div class="col-md-4 mb-3">
                    <label for="doctor">Doctor <span class="text-danger">*</span></label>
                    <select id="doctor" class="form-control" required>
                      <option value="" disabled selected>Select a doctor</option>
                    </select>
                    <div class="invalid-feedback" id="doctorFeedback"></div>
                  </div>
                  <div class="col-md-4 mb-3">
                    <label for="notes">Notes</label>
                    <input type="text" id="notes" class="form-control">
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-4 mb-3">
                    <label for="currentIllness">Current Illness</label>
                    <input type="text" id="currentIllness" class="form-control">
                  </div>
                </div>
                <div class="mt-3">
                  <button type="button" class="btn btn-success" onclick="addAppointment()">Next</button>
                  <button type="button" class="btn btn-danger" onclick="hideAppointmentForm()">Cancel</button>
                </div>
              </form>
            </div>
          </div>

          <!-- Vitals Modal -->
          <div class="modal fade" id="vitalsModal" tabindex="-1" aria-labelledby="vitalsModalLabel" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="vitalsModalLabel">Enter Patient Vitals</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  <form id="vitalsForm">
                    <div class="mb-3">
                      <label for="modalBloodPressure">Blood Pressure</label>
                      <div class="input-group">
                        <input type="text" id="modalBloodPressure" class="form-control" placeholder="120/80">
                        <select class="form-select unit-select" data-input="modalBloodPressure">
                          <option value="mmHg">mmHg</option>
                          <option value="kPa">kPa</option>
                        </select>
                      </div>
                    </div>
                    <div class="mb-3">
                      <label for="modalHeartRate">Heart Rate</label>
                      <div class="input-group">
                        <input type="text" id="modalHeartRate" class="form-control" placeholder="60-100">
                        <span class="input-group-text">bpm</span>
                      </div>
                    </div>
                    <div class="mb-3">
                      <label for="modalTemperature">Temperature</label>
                      <div class="input-group">
                        <input type="text" id="modalTemperature" class="form-control" placeholder="37.0">
                        <select class="form-select unit-select" data-input="modalTemperature">
                          <option value="°C">°C</option>
                          <option value="°F">°F</option>
                        </select>
                      </div>
                    </div>
                    <div class="mb-3">
                      <label for="modalRespiratoryRate">Respiratory Rate</label>
                      <div class="input-group">
                        <input type="text" id="modalRespiratoryRate" class="form-control" placeholder="12-20">
                        <span class="input-group-text">breaths/min</span>
                      </div>
                    </div>
                    <div class="mb-3">
                      <label for="modalOxygenSaturation">Oxygen Saturation</label>
                      <div class="input-group">
                        <input type="text" id="modalOxygenSaturation" class="form-control" placeholder="95-100">
                        <span class="input-group-text">%</span>
                      </div>
                    </div>
                    <div class="mb-3">
                      <label for="modalWeight">Weight</label>
                      <div class="input-group">
                        <input type="text" id="modalWeight" class="form-control" placeholder="70">
                        <select class="form-select unit-select" data-input="modalWeight">
                          <option value="kg">kg</option>
                          <option value="lbs">lbs</option>
                        </select>
                      </div>
                    </div>
                    <div class="mb-3">
                      <label for="modalHeight">Height</label>
                      <div class="input-group">
                        <input type="text" id="modalHeight" class="form-control" placeholder="170">
                        <select class="form-select unit-select" data-input="modalHeight">
                          <option value="cm">cm</option>
                          <option value="in">in</option>
                        </select>
                      </div>
                    </div>
                  </form>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                  <button type="button" class="btn btn-primary" onclick="saveVitals()">Save Vitals</button>
                </div>
              </div>
            </div>
          </div>

          <!-- Edit Appointment Modal -->
          <div class="modal fade" id="editAppointmentModal" tabindex="-1" aria-labelledby="editAppointmentModalLabel" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="editAppointmentModalLabel">Edit Appointment</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  <form id="editAppointmentForm">
                    <div class="row">
                      <div class="col-md-6 mb-3">
                        <label for="editAppointmentID">Appointment ID</label>
                        <input type="text" id="editAppointmentID" class="form-control" readonly>
                      </div>
                      <div class="col-md-6 mb-3">
                        <label for="editPatientID">Patient ID</label>
                        <input type="text" id="editPatientID" class="form-control" readonly>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-md-6 mb-3">
                        <label for="editFirstName">First Name</label>
                        <input type="text" id="editFirstName" class="form-control" required>
                      </div>
                      <div class="col-md-6 mb-3">
                        <label for="editLastName">Last Name</label>
                        <input type="text" id="editLastName" class="form-control" required>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-md-6 mb-3">
                        <label for="editContactNumber">Contact Number</label>
                        <input type="tel" id="editContactNumber" class="form-control" required>
                      </div>
                      <div class="col-md-6 mb-3">
                        <label for="editDateOfBirth">Date of Birth</label>
                        <input type="text" id="editDateOfBirth" class="form-control custom-datetime-picker" required readonly>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-md-6 mb-3">
                        <label for="editAge">Age</label>
                        <input type="number" id="editAge" class="form-control" readonly>
                      </div>
                      <div class="col-md-6 mb-3">
                        <label for="editCurrentIllness">Current Illness</label>
                        <input type="text" id="editCurrentIllness" class="form-control">
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-md-6 mb-3">
                        <label for="editAppointmentDate">Appointment Date</label>
                        <input type="text" id="editAppointmentDate" class="form-control custom-datetime-picker" required>
                      </div>
                      <div class="col-md-6 mb-3">
                        <label for="editDoctor">Doctor</label>
                        <select id="editDoctor" class="form-control" required>
                          <option value="" disabled selected>Loading...</option>
                        </select>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-md-12 mb-3">
                        <label for="editNotes">Notes</label>
                        <textarea id="editNotes" class="form-control"></textarea>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-md-12 mb-3">
                        <label for="editAppointmentStatus">Status</label>
                        <select id="editAppointmentStatus" class="form-control">
                          <option value="Waiting">Waiting</option>
                          <option value="Scheduled">Scheduled</option>
                          <option value="Pending">Pending</option>
                          <option value="Completed">Completed</option>
                          <option value="Canceled">Canceled</option>
                          <option value="Rescheduled">Rescheduled</option>
                        </select>
                      </div>
                    </div>
                    <div class="form-check mb-3">
                      <input type="checkbox" id="editIsEmergency" class="form-check-input">
                      <label for="editIsEmergency" class="form-check-label">Is this an emergency?</label>
                    </div>
                    <div class="mt-3">
                      <button type="button" class="btn btn-success" onclick="updateAppointment()">Save Changes</button>
                      <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>

          <!-- Reschedule Modal -->
          <div class="modal fade" id="rescheduleAppointmentModal" tabindex="-1" aria-labelledby="rescheduleModalLabel" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="rescheduleModalLabel">Reschedule Appointment</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  <form id="rescheduleForm">
                    <input type="hidden" id="rescheduleAppointmentID">
                    <div class="mb-3">
                      <label for="newAppointmentDate">New Date & Time</label>
                      <input type="text" class="form-control custom-datetime-picker" id="newAppointmentDate" required>
                    </div>
                  </form>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                  <button type="button" class="btn btn-primary" onclick="rescheduleAppointment()">Confirm Reschedule</button>
                </div>
              </div>
            </div>
          </div>

          <!-- Patient ID Popup Modal -->
          <div class="modal fade" id="patientIdPopupModal" tabindex="-1" aria-labelledby="patientIdPopupModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="patientIdPopupModalLabel">Patient Created</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  <p>Patient has been successfully created!</p>
                  <div class="input-group mb-3">
                    <input type="text" class="form-control" id="newPatientIdInput" readonly>
                    <button class="btn btn-outline-secondary" type="button" id="copyPatientIdBtn">Copy</button>
                  </div>
                  <p class="text-success" id="copySuccessMsg" style="display: none;">Patient ID copied to clipboard!</p>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-primary" id="makeAppointmentBtn">Make Appointment</button>
                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Footer -->
        <footer class="footer">
          <div class="d-sm-flex justify-content-center justify-content-sm-between">
            <span class="text-muted text-center text-sm-left d-block d-sm-inline-block">Copyright © 2025 <a href="#" target="_blank">Kerala. All rights reserved.</a></span>
            <span class="float-none float-sm-right d-block mt-1 mt-sm-0 text-center">Doctors Dashboard <i class="mdi mdi-heart text-danger"></i></span>
          </div>
        </footer>
      </div>
    </div>
  </div>

  <!-- Vendor Scripts -->
   <script src="main.js"></script>
  <script src="assets/vendors/js/vendor.bundle.base.js"></script>
  <script src="assets/vendors/chart.js/chart.umd.js"></script>
  <script src="assets/vendors/bootstrap-datepicker/bootstrap-datepicker.min.js"></script>
  <script src="assets/js/off-canvas.js"></script>
  <script src="assets/js/misc.js"></script>
  <script src="assets/js/settings.js"></script>
  <script src="assets/js/todolist.js"></script>
  <script src="assets/js/jquery.cookie.js"></script>
  <script src="assets/js/dashboard.js"></script>
</body>
</html>
